---
title: corn相关规则
date: 2025/03/13 20:41:21
categories: js
tags: [js, nodejs]
top: 1
---

Cron表达式是一种用于设置定时任务的语法规则，主要用于Linux系统和其他应用程序中。以下是其核心规则和示例：

一、基本结构
Cron表达式由5-7个时间域组成，用空格分隔，格式为：
```
秒(可选) 分钟 小时 日期 月份 星期 [年]
```
• 标准Linux格式（5域）：`分钟 小时 日期 月份 星期`

• 扩展格式（6-7域）：`秒 分钟 小时 日期 月份 星期 [年]`


二、各域取值范围及符号
| 域       | 取值范围        | 特殊符号          | 说明                                                                 |
|----------|----------------|-------------------|----------------------------------------------------------------------|
| 秒       | 0-59           | `* , - /`         | 可选字段，仅在扩展格式中使用                                         |
| 分钟     | 0-59           | `* , - /`         | -                                                                    |
| 小时     | 0-23           | `* , - /`         | -                                                                    |
| 日期     | 1-31           | `* , - / ? L W`   | `L`表示最后一天，`W`表示最近工作日                                   |
| 月份     | 1-12或JAN-DEC  | `* , - /`         | -                                                                    |
| 星期     | 0-7或SUN-SAT   | `* , - / ? L #`   | `0/7`为周日，`6`为周六；`#`指定第几周（如`6#3`表示第三个周五）      |
| 年(可选) | 1970-2099      | `* , - /`         | 仅部分系统支持                                                       |

三、特殊符号含义
• `*`：匹配所有可能值（如`* * * * *`表示每分钟执行）

• `,`：枚举多个值（如`0,15,30 * * * *`表示每小时的第0、15、30分钟执行）

• `-`：定义范围（如`0-30 * * * *`表示每小时前30分钟）

• `/`：定义间隔（如`*/5 * * * *`表示每5分钟）

• `?`：不指定值（仅用于日期或星期域，避免冲突）

• `L`：最后一天（如`L`在日期域表示月末）

• `W`：最近工作日（如`15W`表示当月15日最近的工作日）

• `#`：第几周的星期几（如`6#3`表示第三个周五）


四、常见示例
1. 每分钟执行  
   `* * * * *`  
2. 每天8:30执行  
   `30 8 * * *`  
3. 每周一至周五9:00-17:00每半小时执行  
   `0 */30 9-17 * * 1-5`  
4. 每月最后一天23:59执行  
   `59 23 L * *`  
5. 每年1月1日0点执行  
   `0 0 1 1 *`  

五、注意事项
1. 冲突处理：日期和星期域通常需用`?`忽略其一（如`* * * 10 * ?`表示每月10日忽略星期）。
2. 跨时区问题：Cron基于系统时区，需注意服务器时区设置。
3. 日志监控：建议记录任务执行日志，避免因任务失败无感知。

更多复杂场景可参考[Cron表达式生成工具](https://crontab.guru/)验证。